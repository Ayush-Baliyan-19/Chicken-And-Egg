<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vishu, Murgi Pehle aayi ke andaa?</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="floating-egg floating-egg-1">ğŸ¥š</div>
    <div class="floating-egg floating-egg-2">ğŸ”</div>
    <div class="floating-egg floating-egg-3">ğŸ¥š</div>
    <div class="floating-egg floating-egg-4">ğŸ”</div>
    <div class="floating-egg floating-egg-5">ğŸ¥š</div>
    <div class="floating-balloon floating-balloon-1">ğŸˆ</div>
    <div class="floating-balloon floating-balloon-2">ğŸˆ</div>
    <div class="floating-balloon floating-balloon-3">ğŸˆ</div>
    <div class="floating-cake">ğŸ‚</div>
    <div class="floating-candle floating-candle-1">ğŸ•¯ï¸</div>
    <div class="floating-candle floating-candle-2">ğŸ•¯ï¸</div>

    <div class="container">
        <p class="subtitle">Vishu, Murgi Pehle aayi ke andaa?</p>
        <h1>Wanna know the answer?</h1>
        <p class="tagline">Click below to find out.</p>
        <div class="buttons">
            <button class="yes-button" onclick="handleYesClick()">Tell me</button>
        </div>
        <div class="gif_container">
            <img src="https://media.tenor.com/uDhARQcsKAkAAAAi/baby-yellow.gif" alt="Curious chicken">
        </div>
    </div>
    <script src="script.js"></script>

    <audio id="bgMusic" loop>
        <source src="./assets/bg-music.webm" type="audio/webm">
    </audio>
    <button type="button" class="music-toggle" id="btnMusicToggle" title="Toggle music" aria-label="Toggle background music">ğŸ”Š</button>

    <script>
        (function() {
            var bgMusic = document.getElementById('bgMusic');
            var btnMusicToggle = document.getElementById('btnMusicToggle');

            // Restore music position from localStorage
            var savedTime = parseFloat(localStorage.getItem('bgMusicTime')) || 0;
            var wasMuted = localStorage.getItem('bgMusicMuted') === 'true';

            bgMusic.volume = 0.4;
            bgMusic.currentTime = savedTime;

            if (!wasMuted) {
                bgMusic.play().catch(function() {});
            } else {
                btnMusicToggle.textContent = 'ğŸ”‡';
                btnMusicToggle.classList.add('muted');
            }

            // Save music position periodically
            setInterval(function() {
                if (!bgMusic.paused) {
                    localStorage.setItem('bgMusicTime', bgMusic.currentTime);
                }
            }, 500);

            // Save position before leaving page
            window.addEventListener('beforeunload', function() {
                localStorage.setItem('bgMusicTime', bgMusic.currentTime);
                localStorage.setItem('bgMusicMuted', bgMusic.paused);
            });

            btnMusicToggle.addEventListener('click', function() {
                if (bgMusic.paused) {
                    bgMusic.play().catch(function() {});
                    btnMusicToggle.textContent = 'ğŸ”Š';
                    btnMusicToggle.classList.remove('muted');
                    localStorage.setItem('bgMusicMuted', 'false');
                } else {
                    bgMusic.pause();
                    btnMusicToggle.textContent = 'ğŸ”‡';
                    btnMusicToggle.classList.add('muted');
                    localStorage.setItem('bgMusicMuted', 'true');
                }
            });
        })();
    </script>
</body>
</html>
